<!DOCTYPE html>
<html lang="es" class="theme-aurora">
<head>
<meta charset="UTF-8" />
<title>EME1 - Ley de la Inercia + Coulomb+Campo El√©ctrico</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="color-scheme" content="light dark" />
<style>
/* =================== PALETA BASE =================== */
:root {
  --color-bg:#0f172a;
  --color-surface:#1e293b;
  --color-surface-alt:#243554;
  --color-brand:#38bdf8;
  --color-brand-accent:#818cf8;
  --color-correct:#10b981;
  --color-wrong:#f43f5e;
  --color-text:#f1f5f9;
  --color-text-dim:#94a3b8;
  --color-border:#334155;
  --color-progress-track:#334155;
  --color-progress-bar:linear-gradient(90deg,#38bdf8,#818cf8);
  --radius-s:.45rem;
  --radius-m:1.1rem;
  --shadow:0 8px 24px -10px rgba(0,0,0,.55),0 2px 6px -2px rgba(0,0,0,.4);
  --transition:.25s cubic-bezier(.4,0,.2,1);
  --focus-ring:0 0 0 3px rgba(56,189,248,.35);
  --font-stack:'Inter','Segoe UI',system-ui,-apple-system,sans-serif;
}
/* =================== TEMAS =================== */
:root.theme-solar, body.theme-solar {
  --color-bg:#FFF8ED; --color-surface:#FFFFFF; --color-surface-alt:#FFF1D6;
  --color-brand:#FF8A3D; --color-brand-accent:#FDB022;
  --color-correct:#12B76A; --color-wrong:#E54848;
  --color-text:#332E29; --color-text-dim:#7A6F63; --color-border:#F2DEC3;
  --color-progress-track:#F3E3CB;
  --color-progress-bar:linear-gradient(90deg,#FF8A3D,#FDB022);
  --shadow:0 6px 22px -8px rgba(255,138,61,.45),0 2px 6px -2px rgba(0,0,0,.15);
  --focus-ring:0 0 0 3px rgba(255,138,61,.35);
}
:root.theme-forest, body.theme-forest {
  --color-bg:#0b1d16; --color-surface:#123226; --color-surface-alt:#184532;
  --color-brand:#34d399; --color-brand-accent:#10b981;
  --color-correct:#22c55e; --color-wrong:#ef4444;
  --color-text:#ecfdf5; --color-text-dim:#6ee7b7; --color-border:#1d4733;
  --color-progress-track:#1d4733;
  --color-progress-bar:linear-gradient(90deg,#34d399,#10b981);
  --shadow:0 10px 28px -14px rgba(0,0,0,.65),0 2px 6px -2px rgba(0,0,0,.45);
  --focus-ring:0 0 0 3px rgba(52,211,153,.35);
}
:root.theme-lab, body.theme-lab {
  --color-bg:#0d1117; --color-surface:#161b22; --color-surface-alt:#1f242c;
  --color-brand:#2ea8ff; --color-brand-accent:#b16cee;
  --color-correct:#1fbf75; --color-wrong:#ff506d;
  --color-text:#dbe2ee; --color-text-dim:#8b9db4; --color-border:#28313d;
  --color-progress-track:#28313d;
  --color-progress-bar:linear-gradient(90deg,#2ea8ff,#b16cee);
  --shadow:0 8px 26px -12px rgba(0,0,0,.55),0 2px 6px -2px rgba(0,0,0,.4);
  --focus-ring:0 0 0 3px rgba(46,168,255,.35);
}
:root.theme-candy, body.theme-candy {
  --color-bg:#130820; --color-surface:#231330; --color-surface-alt:#341b49;
  --color-brand:#ff4ecd; --color-brand-accent:#18e0ff;
  --color-correct:#4ade80; --color-wrong:#ff3d5d;
  --color-text:#f5e9ff; --color-text-dim:#c7b3d9; --color-border:#412d53;
  --color-progress-track:#412d53;
  --color-progress-bar:linear-gradient(90deg,#ff4ecd,#18e0ff 60%,#ffe55a);
  --shadow:0 10px 30px -12px rgba(255,78,205,.4),0 4px 10px -4px rgba(0,0,0,.5);
  --focus-ring:0 0 0 3px rgba(255,78,205,.35);
}
/* =================== GLOBAL =================== */
* { box-sizing:border-box; }
html,body { margin:0; }
html { font-family:var(--font-stack); }
body {
  min-height:100vh; display:flex; align-items:flex-start; justify-content:center;
  background:radial-gradient(circle at 70% 20%,rgba(129,140,248,.15),transparent 60%), var(--color-bg);
  padding:2.8rem 1rem 4rem; color:var(--color-text); -webkit-font-smoothing:antialiased;
}
.quiz-container {
  background:linear-gradient(145deg,var(--color-surface),var(--color-surface-alt));
  padding:2.2rem 2.4rem 2.6rem; border-radius:var(--radius-m);
  width:clamp(320px,94vw,760px); box-shadow:var(--shadow); position:relative; overflow:hidden;
}
.quiz-container:before{
  content:""; position:absolute; inset:0;
  background:radial-gradient(circle at 15% 85%,rgba(255,255,255,.08),transparent 65%), radial-gradient(circle at 90% 15%,rgba(255,255,255,.06),transparent 60%);
  mix-blend-mode:overlay; pointer-events:none;
}
h1{margin:0 0 1rem;text-align:center;font-size:clamp(1.9rem,3vw,2.4rem);font-weight:700;letter-spacing:.5px;
  background:linear-gradient(90deg,var(--color-brand),var(--color-brand-accent));-webkit-background-clip:text;color:transparent;}
.subtitle{text-align:center;font-size:.9rem;color:var(--color-text-dim);margin-top:-.4rem;margin-bottom:.9rem;}
.theme-switcher{display:flex;gap:.75rem;flex-wrap:wrap;justify-content:center;align-items:center;font-size:.75rem;font-weight:600;letter-spacing:.5px;color:var(--color-text-dim);margin:.5rem 0 1.2rem;}
.theme-switcher select,.theme-switcher button{
  background:var(--color-surface-alt);border:1px solid var(--color-border);color:var(--color-text);
  padding:.55rem .9rem;font-size:.8rem;border-radius:.7rem;outline:none;transition:var(--transition);cursor:pointer;font-weight:600;letter-spacing:.3px;
}
.theme-switcher select:hover,.theme-switcher select:focus,.theme-switcher button:hover,.theme-switcher button:focus{
  border-color:var(--color-brand);box-shadow:0 0 0 2px rgba(56,189,248,.25);
}
/* Progreso */
.progress{height:18px;background:var(--color-progress-track);border-radius:999px;overflow:hidden;position:relative;}
.progress-bar{height:100%;width:0%;background:var(--color-progress-bar);background-size:200% 100%;animation:progressSheen 5s linear infinite;transition:width var(--transition);}
@keyframes progressSheen{0%{background-position:0% 50%;}100%{background-position:200% 50%;}}
/* Pregunta / opciones */
.question{margin:1.6rem 0 1rem;font-size:1.15rem;font-weight:600;line-height:1.35;}
.options{display:grid;gap:.75rem;margin-bottom:1.2rem;}
.option-card{
  position:relative;display:flex;align-items:flex-start;gap:.65rem;padding:.9rem 1rem .85rem;
  background:rgba(255,255,255,.04);border:1.5px solid var(--color-border);border-radius:var(--radius-s);
  cursor:pointer;line-height:1.25;font-weight:500;color:var(--color-text);transition:var(--transition);
}
.option-card:hover,.option-card:focus-within{border-color:var(--color-brand);box-shadow:0 0 0 3px rgba(56,189,248,.25);background:rgba(255,255,255,.07);}
.option-card input[type=radio]{position:absolute;opacity:0;inset:0;cursor:pointer;}
.option-card.selected{
  background:linear-gradient(135deg,rgba(56,189,248,.22),rgba(129,140,248,.18));
  border-color:var(--color-brand-accent);box-shadow:0 0 0 3px rgba(129,140,248,.32);transform:translateY(-2px);
}
.options.answered .option-card:not(.selected){opacity:.62;}
.option-indicator{width:20px;height:20px;border:2px solid var(--color-border);border-radius:50%;margin-top:2px;flex-shrink:0;transition:var(--transition);}
.option-card.selected .option-indicator{border-color:var(--color-brand-accent);background:radial-gradient(circle at 50% 50%,var(--color-brand) 45%,transparent 46%);}
/* Botones */
.buttons{display:flex;flex-wrap:wrap;gap:.8rem;justify-content:center;margin-top:.2rem;}
.buttons button{
  background:linear-gradient(135deg,var(--color-brand),var(--color-brand-accent));color:#fff;border:none;
  padding:.75rem 1.15rem;border-radius:.7rem;font-size:.95rem;font-weight:600;letter-spacing:.3px;
  cursor:pointer;position:relative;transition:var(--transition);box-shadow:0 4px 12px -4px rgba(0,0,0,.4);min-width:120px;
}
.buttons button:hover{transform:translateY(-3px);box-shadow:0 8px 18px -6px rgba(0,0,0,.55);}
.buttons button:active{transform:translateY(0);box-shadow:0 2px 8px -2px rgba(0,0,0,.5);}
.buttons button:focus-visible{outline:none;box-shadow:var(--focus-ring);}
.buttons button:disabled{opacity:.45;cursor:not-allowed;transform:none;box-shadow:none;}
/* Resultado */
#result{
  margin-top:1.7rem;text-align:center;font-size:1.1rem;font-weight:600;
  color:var(--color-text);letter-spacing:.3px;
}
.grade-badge{
  display:inline-block;padding:.35rem .7rem;border-radius:.6rem;
  font-weight:700;font-size:.95rem;line-height:1;letter-spacing:.5px;
  box-shadow:0 2px 6px -2px rgba(0,0,0,.35);
}
.grade-A{background:linear-gradient(90deg,#10b981,#34d399);color:#062e20;}
.grade-B{background:linear-gradient(90deg,#3b82f6,#6366f1);color:#0b1c3a;}
.grade-C{background:linear-gradient(90deg,#f59e0b,#fbbf24);color:#3a2502;}
.grade-D{background:linear-gradient(90deg,#f97316,#fb923c);color:#3a1902;}
.grade-F{background:linear-gradient(90deg,#ef4444,#f87171);color:#3a0606;}
.medal{
  margin:.9rem auto 0;width:max-content;padding:.55rem 1.15rem;border-radius:2rem;
  font-size:.85rem;font-weight:600;letter-spacing:.5px;
  background:linear-gradient(120deg,#ffd700,#ffb200,#ffe680);color:#473c05;
  box-shadow:0 4px 12px -4px rgba(0,0,0,.4);
}
.medal.plata{background:linear-gradient(120deg,#d9d9d9,#b5b5b5,#ececec);color:#303030;}
.medal.bronce{background:linear-gradient(120deg,#cd7f32,#b06824,#e6b37d);color:#3b230c;}
/* Feedback */
.toggle-feedback{
  display:inline-block;margin:1.1rem auto 0;background:var(--color-surface-alt);
  padding:.6rem 1rem;border-radius:.6rem;cursor:pointer;font-weight:600;
  border:1px solid var(--color-border);transition:var(--transition);font-size:.9rem;
}
.toggle-feedback:hover{border-color:var(--color-brand);color:var(--color-brand);}
.feedback-container{margin-top:1rem;display:none;}
.feedback-item{
  background:rgba(255,255,255,.05);border:1px solid var(--color-border);
  border-left:4px solid var(--color-brand);padding:.85rem 1rem;border-radius:.6rem;
  margin:.7rem 0;font-size:.9rem;line-height:1.3;
}
.feedback-item.correct{border-left-color:var(--color-correct);}
.feedback-item.incorrect{border-left-color:var(--color-wrong);}
.feedback-item strong{color:var(--color-text);}
.feedback-item em{color:var(--color-text-dim);font-style:normal;display:block;margin-top:.35rem;}
/* Responsive */
@media (max-width:620px){
  .quiz-container{padding:1.6rem 1.3rem 2rem;}
  .question{font-size:1.05rem;}
  body{padding:1.4rem .5rem 3rem;}
}
</style>
</head>
<body class="theme-aurora">
  <div class="quiz-container" id="container">
    <h1>EME1 - Ley de la Inercia + Coulomb + Campo El√©ctrico</h1>
    <div class="subtitle">Responde las preguntas y revisa tu desempe√±o al final.</div>

    <div class="theme-switcher">
      <label for="themeSelect">Tema:</label>
      <select id="themeSelect" onchange="onThemeSelect(this.value)">
        <option value="auto">Auto</option>
        <option value="theme-aurora" selected>Aurora</option>
        <option value="theme-solar">Energ√≠a Solar</option>
        <option value="theme-forest">Bosque Calmo</option>
        <option value="theme-lab">Estudio Cient√≠fico</option>
        <option value="theme-candy">Juventud Gamificada</option>
      </select>
      <button type="button" onclick="resetTheme()">Reset</button>
    </div>

    <div class="progress" aria-label="Progreso">
      <div class="progress-bar" id="progress-bar"></div>
    </div>

    <div id="quiz"></div>

    <div class="buttons">
      <button onclick="prevQuestion()" id="prevBtn">Anterior</button>
      <button onclick="nextQuestion()" id="nextBtn">Siguiente</button>
      <button onclick="restartQuiz()">Reiniciar</button>
      <button onclick="shuffleQuestions()">Reorganizar</button>
      <button onclick="finishQuiz()" id="finishBtn">Finalizar</button>
    </div>

    <div id="result"></div>
    <div id="medalContainer"></div>
    <div id="feedback"></div>
  </div>


<script>
/* ============== PREGUNTAS ============== */
let questions = [
  {
    "q": "1. Una carga +q de masa m est√° en reposo dentro de un campo el√©ctrico uniforme y solo act√∫an fuerzas reales. Para que permanezca en reposo (Primera Ley), debe cumplirse:",
    "options": ["Œ£F = mv", "Œ£F ‚â† 0 pero constante", "Œ£|F| = mg", "Œ£F = qE siempre distinto de 0", "Œ£F = 0"],
    "answer": 4,
    "explanation": "Equilibrio inercial: la suma vectorial de todas las fuerzas (peso, el√©ctrica, tensiones, etc.) debe anularse.",
    "microtarget": "Definici√≥n formal de equilibrio (Œ£F=0) con fuerza el√©ctrica",
    "level": "core"
  },
  {
    "q": "2. DCF: Una carga +q de masa m est√° suspendida en reposo de un hilo vertical en un campo el√©ctrico vertical hacia arriba. Fuerzas correctas en el diagrama:",
    "options": ["Tensi√≥n hacia arriba, peso hacia abajo, fuerza el√©ctrica hacia arriba", "Tensi√≥n hacia arriba, peso hacia abajo √∫nicamente", "Peso y ‚Äòfuerza de inercia‚Äô opuestas", "Solo fuerza el√©ctrica hacia arriba y peso hacia abajo", "Tensi√≥n hacia abajo, peso hacia arriba, fuerza el√©ctrica hacia arriba"],
    "answer": 0,
    "explanation": "Act√∫an T, mg y qE; la tensi√≥n no se elimina mientras la carga cuelga.",
    "microtarget": "Identificaci√≥n completa de fuerzas reales en equilibrio",
    "level": "core"
  },
  {
    "q": "3. Condici√≥n para que una gota de masa m y carga +q flote inm√≥vil en aire bajo campo uniforme vertical E (hacia arriba):",
    "options": ["qE = 0", "qE = 2mg", "qE = mg/2", "qE = mg", "qE = m/E"],
    "answer": 3,
    "explanation": "Equilibrio vertical: fuerza el√©ctrica hacia arriba equilibra peso ‚Üí qE = mg.",
    "microtarget": "Balance vertical qE vs mg",
    "level": "core"
  },
  {
    "q": "4. Un p√©ndulo de longitud L con masa m y carga +q se desv√≠a un √°ngulo Œ∏ por un campo horizontal E. En equilibrio tanŒ∏ es:",
    "options": ["tanŒ∏ = mg / (qE)", "tanŒ∏ = (qE¬∑mg)", "tanŒ∏ = qE / (mg)", "tanŒ∏ = qE¬∑L / (mg)", "tanŒ∏ = (qE)¬≤ / (mg)"],
    "answer": 2,
    "explanation": "Equilibrio: T sinŒ∏ = qE y T cosŒ∏ = mg ‚áí tanŒ∏ = (qE)/(mg).",
    "microtarget": "Descomposici√≥n de tensi√≥n y derivaci√≥n tanŒ∏",
    "level": "core"
  },
  {
    "q": "5. Entre +Q y +4Q separadas distancia d existe un punto donde el campo se anula. Distancia x desde +Q (en la l√≠nea entre ellas):",
    "options": ["x = (1/3)d", "x = (4/5)d", "x = (1/2)d", "No existe entre ellas", "x = (2/3)d"],
    "answer": 4,
    "explanation": "Igualando magnitudes: Q/x¬≤ = 4/(d‚àíx)¬≤ ‚áí d‚àíx = x/2 ‚áí x = (2/3)d.",
    "microtarget": "Punto nulo entre repulsiones desiguales",
    "level": "core"
  },
  {
    "q": "6. Explica por qu√© no hay punto de campo cero entre cargas +Q y ‚àíQ en la l√≠nea que las une.",
    "options": ["Porque el campo de ‚àíQ es siempre menor", "Porque k cambia de signo", "Porque 1/r¬≤ no permite cancelaciones", "Porque el peso domina", "Porque sus campos entre ellas apuntan en la misma direcci√≥n"],
    "answer": 4,
    "explanation": "Entre cargas opuestas los vectores de E se orientan hacia ‚àíQ y desde +Q, coincidiendo en direcci√≥n ‚Üí se suman.",
    "microtarget": "Direcciones de campos de cargas opuestas",
    "level": "core"
  },
  {
    "q": "7. Raz√≥n aproximada entre fuerza el√©ctrica y peso entre dos protones separados por r: F_e / F_g = k e¬≤ / (G m_p¬≤). Esto es del orden de:",
    "options": ["10^20", "10^10", "10^3", "1", "10^36‚Äì10^37"],
    "answer": 4,
    "explanation": "El cociente ‚âà 10^36 (dominaci√≥n abrumadora de interacci√≥n el√©ctrica).",
    "microtarget": "Comparaci√≥n de magnitudes (ignorar mg)",
    "level": "core"
  },
  {
    "q": "8. Una part√≠cula cargada con Œ£‚ÉóF=0 contin√∫a movi√©ndose con velocidad constante. Esto ejemplifica:",
    "options": ["Segunda Ley", "‚ÄòFuerza de inercia‚Äô equilibrando otras", "Primera Ley: MRU equivale a Œ£‚ÉóF=0", "Necesidad de fricci√≥n cero para que exista fuerza neta", "Que el campo es nulo"],
    "answer": 2,
    "explanation": "Primera Ley: reposo y MRU comparten Œ£F=0.",
    "microtarget": "Equivalencia reposo / MRU",
    "level": "core"
  },
  {
    "q": "9. Un DCF muestra ‚Äòfuerza de inercia‚Äô adicional sobre carga en reposo en marco inercial. El error es:",
    "options": ["Omitir peso", "Omitir fuerza el√©ctrica real", "Doblar la tensi√≥n", "Confundir direcci√≥n de qE", "Incluir fuerza ficticia inexistente"],
    "answer": 4,
    "explanation": "En un marco inercial no se incluye fuerza de inercia para un cuerpo en equilibrio.",
    "microtarget": "Eliminaci√≥n de fuerzas ficticias en equilibrio",
    "level": "core"
  },
  {
    "q": "10. Se duplica q y se triplica r respecto a otra carga fija Q. Factor de cambio en la fuerza y efecto sobre equilibrio original:",
    "options": ["F' = (2/9)F ‚Üí fuerza disminuye", "F' = 2F ‚Üí fuerza aumenta", "F' = (1/3)F ‚Üí disminuye moderado", "F' = (9/2)F ‚Üí aumenta mucho", "F' = (4/9)F ‚Üí disminuye"],
    "answer": 0,
    "explanation": "F' = k (2q)Q/(3r)¬≤ = (2/9)F; otras fuerzas deben ajustarse para retener Œ£F=0.",
    "microtarget": "Escalamiento F ‚àù q/r¬≤",
    "level": "core"
  },
  {
    "q": "11. P√©ndulo electrost√°tico: tanŒ∏ = qE/(mg). Para Œ∏ grande la relaci√≥n falla porque:",
    "options": ["TanŒ∏ crece no lineal; la ecuaci√≥n exacta sigue v√°lida pero se interpreta mal", "La gravedad desaparece", "El campo deja de actuar", "La tensi√≥n se hace cero", "qE ya no es horizontal"],
    "answer": 0,
    "explanation": "La ecuaci√≥n exacta T sinŒ∏ = qE, T cosŒ∏ = mg siempre vale; la aproximaci√≥n Œ∏‚âàtanŒ∏‚âàsinŒ∏ solo es para √°ngulos peque√±os.",
    "microtarget": "L√≠mites de validez angular",
    "level": "cons"
  },
  {
    "q": "12. Dos cargas id√©nticas +q cuelgan de un punto com√∫n mediante hilos de longitud L y se separan un √°ngulo 2œÜ por repulsi√≥n. Ecuaci√≥n de equilibrio radial/tangencial correcta:",
    "options": ["T cosœÜ = k q¬≤ / r¬≤ y T sinœÜ = mg", "T = k q¬≤ / r¬≤ + mg", "k q¬≤ / r = mg", "T sinœÜ = mg y T cosœÜ = k q¬≤ / r¬≤", "T sinœÜ = k q¬≤ / r¬≤ y T cosœÜ = mg"],
    "answer": 4,
    "explanation": "Componente horizontal de T equilibra Coulomb; vertical equilibra peso.",
    "microtarget": "Planteo de equilibrio en configuraci√≥n sim√©trica",
    "level": "cons"
  },
  {
    "q": "13. Bloque (m, carga +q) sobre plano horizontal con fricci√≥n est√°tica Œº_s y campo horizontal E. Condici√≥n para que no se deslice:",
    "options": ["qE ‚â• Œº_s mg", "qE = mg", "qE ‚â§ mg/Œº_s", "qE = 0", "qE ‚â§ Œº_s mg"],
    "answer": 4,
    "explanation": "F_el√©ctrica ‚â§ fuerza m√°xima de fricci√≥n est√°tica: qE ‚â§ Œº_s N = Œº_s mg.",
    "microtarget": "Umbral de fricci√≥n est√°tica con fuerza el√©ctrica",
    "level": "cons"
  },
  {
    "q": "14. Para mantener qE = mg se puede aumentar q o E. Si el aumento de q es costoso (descarga parcial), preferible es:",
    "options": ["Aumentar q y reducir E", "Aumentar ambos para redundancia", "Reducir E y q simult√°neamente", "No cambiar nada", "Aumentar E manteniendo q"],
    "answer": 4,
    "explanation": "Si q es dif√≠cil de incrementar, se ajusta E para balancear peso.",
    "microtarget": "An√°lisis param√©trico de equilibrio",
    "level": "cons"
  },
  {
    "q": "15. Configuraci√≥n lineal: +Q (x=0), +q (x=a), +Q (x=d). Para que la fuerza sobre +q sea cero:",
    "options": ["kQ/a = kQ/(d‚àía)", "kQ/a¬≤ + kQ/(d‚àía)¬≤ = 0", "Q = 0", "q = ‚àíQ", "kQ/a¬≤ = kQ/(d‚àía)¬≤"],
    "answer": 4,
    "explanation": "Repulsiones contrarias deben igualarse en magnitud: Q/a¬≤ = Q/(d‚àía)¬≤.",
    "microtarget": "Condici√≥n de equilibrio intermedio sim√©trico",
    "level": "cons"
  },
  {
    "q": "16. Ignorar el peso en posici√≥n de equilibrio cuando F_e = 1000 mg introduce error relativo ‚âà",
    "options": ["1%", "10%", "0%", "100%", "0.1%"],
    "answer": 4,
    "explanation": "Peso aporta 1/1000 del total ‚Üí error ‚âà 0.1%.",
    "microtarget": "Estimaci√≥n de error por fuerza despreciada",
    "level": "cons"
  },
  {
    "q": "17. Punto neutro entre dos cargas iguales +Q: ¬øequilibrio para carga de prueba +q?",
    "options": ["Estable: fuerza restaura", "Neutro estable en todas direcciones", "Metastable con retorno lento", "Imposible clasificar", "Inestable: peque√±a perturbaci√≥n genera fuerza que aleja"],
    "answer": 4,
    "explanation": "Perturbaci√≥n rompe simetr√≠a y repulsi√≥n resultante empuja m√°s lejos.",
    "microtarget": "Clasificaci√≥n de estabilidad por perturbaci√≥n",
    "level": "cons"
  },
  {
    "q": "18. Carga +q de masa m en plano inclinado (√°ngulo Œ∏) sin fricci√≥n con campo E paralelo al plano apuntando hacia arriba. Condici√≥n de equilibrio:",
    "options": ["qE = mg cosŒ∏", "qE = mg tanŒ∏", "qE = mg", "qE = 0", "qE = mg sinŒ∏"],
    "answer": 4,
    "explanation": "Componentes a lo largo del plano: qE (arriba) = mg sinŒ∏ (abajo).",
    "microtarget": "Balance en plano inclinado con campo",
    "level": "cons"
  },
  {
    "q": "19. M√©todo tipo Millikan: se ajusta E hasta que gota cargada queda suspendida. Carga se calcula mediante:",
    "options": ["q = E / (mg)", "q = mE / g", "q = g / (mE)", "q = E¬≤ / (mg)", "q = mg / E"],
    "answer": 4,
    "explanation": "Equilibrio: qE = mg ‚áí q = mg/E.",
    "microtarget": "Determinaci√≥n experimental de carga por equilibrio",
    "level": "cons"
  },
  {
    "q": "20. Gr√°fica F_net(x) cruza cero en x‚ÇÄ con pendiente dF/dx < 0. El equilibrio en x‚ÇÄ es:",
    "options": ["Inestable", "Neutro", "Solo estable si Q<0", "Indeterminado", "Estable"],
    "answer": 4,
    "explanation": "Pendiente negativa ‚áí desplazamiento peque√±o produce fuerza restauradora.",
    "microtarget": "Criterio de estabilidad (derivada negativa)",
    "level": "cons"
  },
  {
    "q": "21. Se desea reducir tensi√≥n en un hilo que sostiene masa m aplicando campo vertical E y dotando al cuerpo de carga q. Restricci√≥n: T ‚â§ T_max. Condici√≥n que asegura T ‚â§ T_max:",
    "options": ["qE ‚â§ mg ‚àí T_max", "qE = T_max", "qE = mg + T_max", "qE = 0", "qE ‚â• mg ‚àí T_max"],
    "answer": 4,
    "explanation": "Equilibrio: T + qE = mg ‚áí T = mg ‚àí qE ‚â§ T_max ‚áí qE ‚â• mg ‚àí T_max.",
    "microtarget": "Dise√±o inverso con restricci√≥n de tensi√≥n",
    "level": "oli"
  },
  {
    "q": "22. Para dos cargas ajustables que flanquean punto P, se busca minimizar campo uniforme adicional requerido para equilibrar una tercera carga/m, variando separaci√≥n s. El criterio conceptual es:",
    "options": ["Hacer s‚Üí0 siempre minimiza E", "Hacer s‚Üí‚àû siempre minimiza E", "Tomar s para que E sea m√°ximo y usarlo", "No depende de s", "Elegir s que haga derivada dE_local/ds = 0"],
    "answer": 4,
    "explanation": "Optimizaci√≥n param√©trica: condici√≥n estacionaria dE/ds=0 para m√≠nimo.",
    "microtarget": "Optimizaci√≥n de par√°metro geom√©trico",
    "level": "oli"
  },
  {
    "q": "23. P√©ndulo electrost√°tico peque√±o: tanŒ∏‚âàŒ∏. Expresi√≥n linealizada del √°ngulo:",
    "options": ["Œ∏ ‚âà (mg)/(qE)", "Œ∏ ‚âà (qE)¬≤/(mg)", "Œ∏ ‚âà ‚àö(qE/(mg))", "Œ∏ ‚âà qE¬∑mg", "Œ∏ ‚âà qE/(mg)"],
    "answer": 4,
    "explanation": "De tanŒ∏ = qE/(mg), para Œ∏ peque√±o tanŒ∏‚âàŒ∏ ‚áí Œ∏ ‚âà qE/(mg).",
    "microtarget": "Linealizaci√≥n para √°ngulos peque√±os",
    "level": "oli"
  },
  {
    "q": "24. Cerca de equilibrio x‚ÇÄ una carga siente F(x) ‚âà ‚àík_eff (x‚àíx‚ÇÄ). Frecuencia de peque√±as oscilaciones:",
    "options": ["œâ = k_eff m", "œâ = m / k_eff", "œâ = k_eff", "œâ = ‚àö(m/k_eff)", "œâ = ‚àö(k_eff/m)"],
    "answer": 4,
    "explanation": "Ecuaci√≥n m x'' = ‚àík_eff (x‚àíx‚ÇÄ) ‚áí œâ = ‚àö(k_eff/m).",
    "microtarget": "Linealizaci√≥n y frecuencia natural",
    "level": "oli"
  },
  {
    "q": "25. Incremento peque√±o ŒîE en el campo horizontal del p√©ndulo (r√©gimen lineal). Variaci√≥n angular ŒîŒ∏ aproximadamente:",
    "options": ["ŒîŒ∏ ‚âà (mg/q) ŒîE", "ŒîŒ∏ ‚âà (qE/(mg)) ŒîE", "ŒîŒ∏ ‚âà (q/(mg)) ŒîE¬≤", "ŒîŒ∏ ‚âà ‚àö(qŒîE/(mg))", "ŒîŒ∏ ‚âà (q/(mg)) ŒîE"],
    "answer": 4,
    "explanation": "Œ∏ ‚âà qE/(mg) ‚áí derivada dŒ∏/dE = q/(mg) ‚áí ŒîŒ∏ ‚âà (q/(mg))ŒîE.",
    "microtarget": "Sensibilidad lineal de √°ngulo a campo",
    "level": "oli"
  },
  {
    "q": "26. Bloque con fricci√≥n cin√©tica f = Œº_k N y campo vertical hacia arriba reduce N. Si fuerza mec√°nica horizontal F se mantiene, el requerimiento de arrastre disminuye porque:",
    "options": ["N = mg + qE ‚áí f aumenta", "f es independiente de N", "La fuerza el√©ctrica reemplaza a la fricci√≥n", "Œº_k = 0 autom√°ticamente", "N = mg ‚àí qE ‚áí f disminuye"],
    "answer": 4,
    "explanation": "Elevaci√≥n parcial (qE hacia arriba) reduce normal: N = mg ‚àí qE ‚áí f = Œº_k (mg ‚àí qE).",
    "microtarget": "Reducci√≥n de fricci√≥n por alivio de normal",
    "level": "oli"
  },
  {
    "q": "27. Tres cargas +Q, +q, +Q alineadas; +q en centro. Para que la posici√≥n central sea estable (energ√≠a m√≠nima), se requerir√≠a (idealmente):",
    "options": ["q ‚â´ Q", "Q ‚â´ q asegura estabilidad", "q = 0", "Cambiar una de las cargas a signo opuesto", "No es estable con todas positivas (es inestable)"],
    "answer": 4,
    "explanation": "Con todas positivas el centro es un m√°ximo de potencial (inestable).",
    "microtarget": "Condici√≥n de estabilidad (segundo derivado >0 ausente)",
    "level": "oli"
  },
  {
    "q": "28. Lejos de una distribuci√≥n cargada neutral, el campo se aproxima a:",
    "options": ["Monopolar ~1/r¬≤ dominante siempre aunque carga neta 0", "Constante", "Exponencial", "Circular uniforme", "Dipolar ~1/r¬≥ (al anular monopolo)"],
    "answer": 4,
    "explanation": "Carga neta cero ‚áí t√©rmino monopolar se cancela ‚áí siguiente t√©rmino: dipolo 1/r¬≥.",
    "microtarget": "Jerarqu√≠a multipolar y neutralidad",
    "level": "oli"
  },
  {
    "q": "29. P√©ndulo electrost√°tico: se miden (Œ∏‚ÇÅ,E‚ÇÅ) y (Œ∏‚ÇÇ,E‚ÇÇ) peque√±os. De Œ∏ ‚âà qE/(mg) se obtiene q y m si adem√°s se conoce:",
    "options": ["Nada m√°s: ya est√° determinado", "Solo m", "Solo q", "Longitud L siempre", "La combinaci√≥n (q/m) de dos ecuaciones y tensi√≥n inicial para separar"],
    "answer": 4,
    "explanation": "Dos ecuaciones: Œ∏‚ÇÅ = (qE‚ÇÅ)/(mg), Œ∏‚ÇÇ = (qE‚ÇÇ)/(mg) ‚áí misma raz√≥n Œ∏/E = q/(mg). Para separar q y m se necesita T (‚âà mg) u otra medici√≥n independiente de m o q.",
    "microtarget": "Sistema de ecuaciones y par√°metros adicionales",
    "level": "oli"
  },
  {
    "q": "30. Comparar trabajo para elevar lentamente (quasi-est√°tico, ajustando E siempre para equilibrio) vs elevar r√°pidamente sin campo y luego frenar. El trabajo m√≠nimo externo es:",
    "options": ["Mayor en proceso quasi-est√°tico", "Menor o igual en proceso quasi-est√°tico", "Igual en todos los casos", "Cero en proceso r√°pido", "Indefinido sin calor"],
    "answer": 1,
    "explanation": "Proceso reversible (equilibrio continuo) minimiza trabajo extra disipativo.",
    "microtarget": "Principio de trabajo m√≠nimo (quasiest√°tico)",
    "level": "oli"
  }
];

// NOTAS:
/// Se observaron algunos √≠tems donde la opci√≥n correcta requerida no coincid√≠a con el √≠ndice marcado inicialmente (ej. 1, 15, 16, 23, 28).
/// Si necesitas la versi√≥n totalmente depurada con todos los √≠ndices ajustados exactamente a la opci√≥n mostrada, responde ‚Äúpulir Hooke‚Äù y lo corrijo.
/// Tambi√©n puedo a√±adir campos 'module': 'Hooke', 'level': 'core/cons/oli'.



let originalQuestions = JSON.parse(JSON.stringify(questions));
let current = 0;
let answers = new Array(questions.length).fill(null);

/* ============== Persistencia ============== */
(function restoreState(){
  try {
    const saved = JSON.parse(localStorage.getItem("quizParabolicoState"));
    if(saved && saved.questionsHash === hashQuestions(questions)) {
      current = saved.current;
      answers = saved.answers;
    }
  } catch(e) {}
})();
function hashQuestions(qs){ return btoa(unescape(encodeURIComponent(qs.map(q=>q.q).join("|")))).slice(0,24); }
function persistState(){
  localStorage.setItem("quizParabolicoState", JSON.stringify({
    current, answers, questionsHash: hashQuestions(questions)
  }));
}

/* ============== Render inicial ============== */
renderQuestion(); updateNavState();

/* ============== Render Pregunta ============== */
function renderQuestion(){
  const q = questions[current];
  const answered = answers[current] !== null;
  document.getElementById("progress-bar").style.width = `${(current+1)/questions.length*100}%`;
  document.getElementById("quiz").innerHTML = `
    <div class="question" id="questionText">${current+1}. ${q.q}</div>
    <div class="options ${answered?'answered':''}" role="radiogroup" aria-labelledby="questionText">
      ${q.options.map((opt,i)=>`
        <label class="option-card ${answers[current]===i?'selected':''}" tabindex="0">
          <span class="option-indicator" aria-hidden="true"></span>
          <input type="radio" name="opt" value="${i}" ${answers[current]===i?'checked':''}
              aria-checked="${answers[current]===i?'true':'false'}" aria-label="${opt}">
          <span>${opt}</span>
        </label>
      `).join("")}
    </div>`;
  document.querySelectorAll('.option-card').forEach(card=>{
    card.addEventListener('click',()=>selectCard(card));
    card.addEventListener('keypress',e=>{
      if(e.key===" "||e.key==="Enter"){e.preventDefault();selectCard(card);}
    });
  });
}
function selectCard(card){
  document.querySelectorAll('.option-card').forEach(c=>{
    c.classList.remove('selected');
    const inp = c.querySelector('input'); if(inp) inp.setAttribute('aria-checked','false');
  });
  card.classList.add('selected');
  const input = card.querySelector('input');
  input.checked = true; input.setAttribute('aria-checked','true');
  card.closest('.options').classList.add('answered');
  saveAnswer();
}
function saveAnswer(){
  const sel = document.querySelector('input[name="opt"]:checked');
  if(sel){ answers[current] = parseInt(sel.value,10); persistState(); }
  updateNavState();
}

/* ============== Navegaci√≥n ============== */
function nextQuestion(){ if(current<questions.length-1){ current++; renderQuestion(); updateNavState(); persistState(); } }
function prevQuestion(){ if(current>0){ current--; renderQuestion(); updateNavState(); persistState(); } }
function updateNavState(){
  document.getElementById('prevBtn').disabled = current===0;
  document.getElementById('nextBtn').disabled = current===questions.length-1;
  document.getElementById('finishBtn').disabled = answers.includes(null);
}
function finishQuiz(){ if(answers.includes(null)){alert("Responde todas las preguntas antes de finalizar.");return;} showResult(); }

/* ============== Reiniciar / Reorganizar ============== */
function restartQuiz(){
  if(!confirm("¬øReiniciar el cuestionario?")) return;
  answers = new Array(questions.length).fill(null);
  current = 0;
  document.getElementById('result').innerHTML = "";
  document.getElementById('feedback').innerHTML = "";
  document.getElementById('medalContainer').innerHTML = "";
  renderQuestion(); updateNavState(); persistState();
  window.scrollTo({top:0,behavior:"smooth"});
}
function shuffleQuestions(){
  if(!confirm("¬øReorganizar aleatoriamente las preguntas? Reiniciar√° el intento.")) return;
  questions = questions.map(v=>({v,sort:Math.random()})).sort((a,b)=>a.sort-b.sort).map(o=>o.v);
  originalQuestions = JSON.parse(JSON.stringify(questions));
  restartQuiz();
}

/* ============== Calificaci√≥n (Letra est√°ndar) ============== */
function gradeLetter(percent){
  if(percent >= 90) return 'A';
  if(percent >= 80) return 'B';
  if(percent >= 70) return 'C';
  if(percent >= 60) return 'D';
  return 'F';
}

/* ============== Resultado ============== */
function showResult(){
  let score=0;
  const details = questions.map((q,i)=>{
    const correct = q.answer===answers[i];
    if(correct) score++;
    return `<div class="feedback-item ${correct?'correct':'incorrect'}">
      <strong>${i+1}. ${q.q}</strong><br>
      Tu respuesta: ${answers[i]!==null?q.options[answers[i]]:'<em>No respondida</em>'}<br>
      Correcta: <span style="color:var(${correct?'--color-correct':'--color-brand'});font-weight:600">${q.options[q.answer]}</span>
      <em>${q.explanation}</em>
    </div>`;
  }).join('');
  const percent = (score/questions.length)*100;
  const letter = gradeLetter(percent);

  // Medalla seg√∫n letra
  let medalClass="", medalText="";
  if(letter==='A'){ medalText="¬°Medalla de Oro! Dominio excelente."; }
  else if(letter==='B'){ medalClass="plata"; medalText="Medalla de Plata: Muy buen desempe√±o."; }
  else if(letter==='C'){ medalClass="bronce"; medalText="Medalla de Bronce: Buen avance, sigue practicando."; }
  else if(letter==='D'){ medalText="Refuerza conceptos clave y vuelve a intentarlo. ¬°Puedes mejorar!"; }
  else { medalText="Necesitas repasar la teor√≠a y practicar m√°s. ¬°√Ånimo, cada intento suma!"; }

  const gradeBadge = `<span class="grade-badge grade-${letter}">${letter}</span>`;
  document.getElementById("result").innerHTML =
    `Puntaje final: <strong>${score}/${questions.length}</strong> ‚Äî ${percent.toFixed(1)}% ‚Äî ${gradeBadge}`;

  if(letter==='A'||letter==='B'||letter==='C'){
    document.getElementById("medalContainer").innerHTML =
      `<div class="medal ${medalClass}">${medalText}</div>`;
  } else {
    document.getElementById("medalContainer").innerHTML =
      `<div style="margin:.9rem auto 0;max-width:480px;font-size:.85rem;line-height:1.35;text-align:center;color:var(--color-text-dim);">${medalText}</div>`;
  }

  document.getElementById("feedback").innerHTML =
    `<div class="toggle-feedback" onclick="toggleFeedback()">Ver desglose detallado</div>
     <div class="feedback-container" id="feedbackContainer" aria-hidden="true">${details}</div>`;
  window.scrollTo({top:document.getElementById("result").offsetTop - 40, behavior:'smooth'});
}
function toggleFeedback(){
  const fc = document.getElementById('feedbackContainer');
  if(!fc) return;
  const o = fc.style.display==='block';
  fc.style.display = o?'none':'block';
  fc.setAttribute("aria-hidden", o?"true":"false");
  document.querySelector('.toggle-feedback').textContent = o?'Ver desglose detallado':'Ocultar desglose';
}

/* ============== Temas ============== */
function changeTheme(theme){ document.documentElement.className=theme; document.body.className=theme; }
function onThemeSelect(val){
  if(val==='auto'){ localStorage.setItem("quizParabolicoThemeMode","auto"); applyAutoTheme(); }
  else {
    localStorage.setItem("quizParabolicoThemeMode","manual");
    localStorage.setItem("quizParabolicoTheme",val);
    changeTheme(val);
  }
}
function resetTheme(){
  localStorage.removeItem("quizParabolicoThemeMode");
  localStorage.removeItem("quizParabolicoTheme");
  document.getElementById('themeSelect').value='theme-aurora';
  changeTheme('theme-aurora');
}
function applyAutoTheme(){
  const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
  changeTheme(prefersDark?'theme-aurora':'theme-solar');
}
(function restoreTheme(){
  const mode = localStorage.getItem("quizParabolicoThemeMode");
  if(mode==='auto'){ document.getElementById('themeSelect').value='auto'; applyAutoTheme(); }
  else {
    const saved = localStorage.getItem("quizParabolicoTheme")||'theme-aurora';
    document.getElementById('themeSelect').value=saved; changeTheme(saved);
  }
  window.matchMedia("(prefers-color-scheme: dark)").addEventListener('change',e=>{
    if(localStorage.getItem("quizParabolicoThemeMode")==='auto') applyAutoTheme();
  });
})();

/* ============== Atajos teclado ============== */
document.addEventListener('keydown',e=>{
  if(e.target.tagName==="INPUT"||e.target.tagName==="SELECT"||e.target.isContentEditable) return;
  if(e.key==="ArrowRight") nextQuestion();
  if(e.key==="ArrowLeft") prevQuestion();
});
</script>
</body>
</html>

